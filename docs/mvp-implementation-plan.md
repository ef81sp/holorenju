# 連珠学習アプリMVP実装プラン

## 実装概要

**目標**: フブキ先生の連珠教室（学習シナリオ特化版）
**技術スタック**: Vue 3 + TypeScript + Konva + Pinia
**対象**: 連珠初級者向けの段階的学習システム

## 機能スコープ（MVP）

### 含まれる機能

- ✅ 15×15連珠盤面（Konvaキャンバス）
- ✅ 二段階石配置操作（1回目クリック→仮指定、2回目→確定）
- ✅ 基本ルール・禁じ手判定（三三・四四・長連）
- ✅ キャラクター対話システム（フブキ先生・みこ）
- ✅ 初級学習シナリオ3つ
- ✅ 学習進度管理（ローカルストレージ）

### 除外された機能

- ❌ AI対局機能
- ❌ 複雑なゲーミフィケーション
- ❌ 音響効果
- ❌ 高度なアニメーション

## ディレクトリ構造

```
src/
├── types/                         # TypeScript型定義
│   ├── game.ts                    # ゲーム関連型
│   ├── character.ts               # キャラクター関連型
│   └── scenario.ts                # シナリオ関連型
├── stores/                        # Pinia状態管理
│   ├── gameStore.ts               # ゲーム状態
│   ├── dialogStore.ts             # 対話状態
│   └── progressStore.ts           # 学習進度
├── components/
│   ├── game/
│   │   ├── RenjuBoard.vue         # Konva盤面コンポーネント
│   │   ├── GamePanel.vue          # ゲーム情報表示
│   │   └── StonePreview.vue       # 仮石表示
│   ├── character/
│   │   ├── CharacterDialog.vue    # キャラ対話UI
│   │   ├── FubukiCharacter.vue    # フブキ先生
│   │   └── MikoCharacter.vue      # みこ
│   └── scenarios/
│       ├── ScenarioMenu.vue       # シナリオ選択
│       └── ScenarioPlayer.vue     # シナリオプレイヤー
├── logic/                         # ゲームロジック
│   ├── renjuRules.ts              # 連珠ルール判定
│   └── patternRecognition.ts      # パターン認識
├── data/                          # ゲームデータ
│   ├── scenarios.json             # シナリオデータ
│   └── dialogTexts.json           # 対話テキスト
└── assets/                        # 画像・リソース
    └── characters/                # キャラ仮画像
```

## 実装順序

### Phase 1: プロジェクト基盤

1. 依存関係インストール（Konva, Pinia）
2. ディレクトリ構造作成
3. 基本型定義作成

### Phase 2: 盤面システム

4. Konva盤面コンポーネント実装
5. 二段階石配置システム実装
6. 連珠ルール判定ロジック実装

### Phase 3: キャラクター対話

7. キャラクター対話UIコンポーネント
8. 対話データ構造定義
9. 状態管理ストア実装

### Phase 4: 学習シナリオ

10. シナリオデータ構造設計
11. シナリオプレイヤーコンポーネント
12. 3つの初級シナリオ作成

### Phase 5: 統合・仕上げ

13. メイン画面統合
14. 学習進度管理
15. レスポンシブ対応・テスト

## キャラクター設定（仮実装）

### フブキ先生

- 役割: 指導者、解説者
- 口調: 丁寧で親切、時々ユーモア
- ビジュアル: 仮画像（シンプルなアバター）

### みこ

- 役割: 生徒、プレイヤー代役
- 口調: 明るく素直
- ビジュアル: 仮画像（シンプルなアバター）

## 学習シナリオ概要

### シナリオ1: 「活三を見つけよう」

- 目標: 活三パターンの認識
- 内容: フブキ先生が活三を説明→みこが該当箇所をクリック
- 判定: 正解位置クリックで次段階へ

### シナリオ2: 「活四を防ごう」

- 目標: 相手の活四を防ぐ手を学習
- 内容: 危険な局面でフブキ先生が防御手を指導
- 判定: 正しい防御手で成功

### シナリオ3: 「禁じ手を覚えよう」

- 目標: 三三・四四・長連の理解
- 内容: 禁じ手になる手を避ける練習
- 判定: 禁じ手回避で成功

## 技術仕様

### 盤面操作仕様

1. **1回目クリック**: 仮石表示（半透明・点線枠）
2. **2回目クリック**: 石配置確定
3. **別箇所クリック**: 仮石位置変更
4. **キャンセル**: 右クリックまたは専用ボタン

### 状態管理

- **ゲーム状態**: 盤面配置、現在の手番、ゲームモード
- **対話状態**: 現在の台詞、選択肢、会話進行
- **進度状態**: クリア済みシナリオ、学習レベル

### データ永続化

- ローカルストレージ使用
- 学習進度、設定をJSON形式で保存
