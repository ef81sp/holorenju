\*\*# Plan: 連珠学習アプリの企画ドキュメント構成設計

## プロダクト概要

**タイトル案**：「フブキ先生の連珠教室」（仮）

**コンセプト**：
ホロライブの白上フブキ（キツネ耳先生）がさくらみこ（プレイヤー）に対して、優しく・ユーモアを交えながら連珠ルールと戦略を教える学習ゲーム。Biimシステムのような双方向対話を通じて、初中級レベルの連珠知識をゲーミング体験として習得できます。

**キャラクター設定**：

- **白上フブキ（先生役）**：キツネ耳のキャラクター。親切で知識豊富な指導者。ユーザーの間違いに対しても励ましやユーモアを交えた説明で学習を導く。時々ホロライブらしいユーモアを交えた説明も。
- **さくらみこ（生徒・プレイヤー側）**：プレイヤーが操作・代入するキャラ。初心者として、フブキ先生に質問したり、指導を受けながら成長する立場。

---

ユーザーが Vue + Konva で実装する初中級者向けの連珠学習アプリについて、企画から設計仕様までを段階的にまとめるドキュメント体系を構築します。基本ルール・戦略教育とキャラクターによる双方向対話を軸に、パターン学習とゲーミフィケーション要素を組み合わせた学習設計を展開します。

## Steps

1. **企画書（プロダクト概要）の構成案作成**
   コンセプト、ターゲット（初中級者定義）、学習目標、主要機能（シナリオモード・パズルモード・フリープレイ）、技術スタック概要を 1 ドキュメントにまとめます。

2. **学習教材の設計フレームワーク定義**
   段階的な珠型・パターン学習マップ（初級→中級の進路）、各シナリオ/パズルの構成、キャラクターの対話スクリプト例を含むコンテンツ設計シートを作成します。

3. **機能仕様書の骨組み作成**
   ゲーム機械（禁じ手判定、正着手評価、盤面状態管理）、ダイアログシステム（会話フロー、キャラ応答トリガー）、進度トラッキング（ローカルストレージ仕様）の 3 領域を仕様化します。

4. **UI/UX レイアウト・フロー設計書作成**
   Konva キャンバス（盤面）、Vue コンポーネント（ゲーム情報パネル・キャラ吹き出し・選択肢UI）の配置図、各画面遷移フロー（メニュー→シナリオ選択→プレイ→結果）を可視化します。

5. **ゲーミフィケーション・モチベーション設計書作成**
   ポイント/バッジシステム、レベル/プログレス表示、ユーザー体験の達成感設計（短期・中期目標の設定例）をまとめます。

6. **実装ロードマップの概要定義**
   MVP（最小要件：基本ルール + 初級シナリオ 3 つ + AI 対局）、Phase 2（珠型パズルモード）、Phase 3（中級シナリオ拡張）のマイルストーンを提案します。

## Further Considerations

1. **キャラクター設計の方針** ✓確定
   - **白上フブキ**：先生役（指導・解説・褒まし）
   - **さくらみこ**：生徒・プレイヤー役（質問・成長の表現）
   - ホロライブ二次創作として、両キャラのビジュアル・声色を可能な限り再現する設計（キャラチップ / イラスト配置）
   - 会話時のトーン：フブキは親切だが知的、みこは明るく素直、時々ホロライブコミュニティのネタを含める可能性も検討

2. **オンライン機能の有無** クライアントサイドのみ（ローカルストレージ + 単独プレイ）/ ユーザー登録とクラウド同期は Phase 2 以降か、スコープ定義が必要。

3. **AI 対戦機能の実装方式** ランダム + 簡易ルール判定のみ / 弱い AI（定石の一部実装）/ 強い AI（ミニマックスなど）で難度調整、学習段階に応じた設計が重要。

---

## 参考情報：調査結果まとめ

### 連珠の基本ルール・戦略

#### 基本ルール

- **勝利条件**：黒または白の石を縦・横・斜めいずれかに5個並べる
- **盤面**：15路盤（15×15）が公式規格
- **黒の禁じ手**（白にはない制限）：
  - **三三**：異なる角度で同時に2つの三ができる
  - **四四**：同一地点で4が2個以上できる
  - **長連**：6個以上の連

#### 初中級者が学ぶべき基本用語

| 用語     | 定義                                                      |
| -------- | --------------------------------------------------------- |
| **活三** | どちらかの端も開いている3連（放置すると四連になる）       |
| **活四** | 4連で、1つ石を加えると5連になる                           |
| **達四** | 4連で両端が空いている（どちらを止めても相手の勝ちが確定） |
| **長連** | 6個以上の連（黒は禁止、白は勝ち）                         |

#### 基本的な戦略

- **開き方（珠型）**：直接打ちと間接打ちの2種類、合計26の珠型が存在
- **攻撃パターン**：
  - 四三：四と三を同時に作る（強力な勝利パターン）
  - 四四：4を2つ同時に作る（相手が止められない）
- **守り方**：相手の活四（次手で五連になる形）を優先的に阻止
- **開局規定**：先手必勝を防ぐため、公式戦では複雑な開局ルール（2025年現在は「五珠交代打ち」）を採用

#### 初中級者の学習段階

- **初級**：基本ルール、禁じ手の理解、簡単な三・四・五連の認識
- **中級**：珠型の理解、四三パターンの認識、基本的な防御戦略

### 対話型教育の仕組み（Dialogue System）

**構成要素**：

1. **入力解析**：ユーザー入力を自然言語理解（NLU）で処理
2. **ダイアログマネージャー**：会話の流れと学習進度を管理
3. **ドメイン知識**：連珠ルール・戦略の知識ベース
4. **出力生成**：自然言語生成（NLG）でキャラクターが応答

#### 会話型教育の学習特性

- **相互作用性**：リアルタイムで学習者の質問に応答
- **フィードバック**：ユーザーの操作に即座に適切な説明を提供
- **適応的学習**：進度に応じてコンテンツレベルを調整
- **エンゲージメント向上**：会話を通じた人間的なつながりが動機付けを強化

### Vue + Konva での実装パターン

#### Konva の特性

- **キャンバスレンダリング**：高速な2D描画が可能
- **オブジェクト指向API**：図形、グループ、イベントハンドリングが直感的
- **Vue連携**：公式にVueフレームワークをサポート
- **ドラッグ&ドロップ**：棋石配置インタラクションに最適
- **レスポンシブ**：デスクトップ・モバイル両対応

#### 一般的な実装レイアウト

1. **ボード表示エリア**（Konva Canvas）
   - 15×15盤面の描画
   - 黒白の棋石表示
   - ホバー時のプレビュー、クリック判定

2. **ゲーム情報パネル**（Vue コンポーネント）
   - 現在の局面情報（黒/白のターン表示）
   - 次の手の候補を示すヒント機能
   - 手数カウンタ

3. **キャラクターダイアログUI**（Vue + CSS）
   - 左右フロート配置のキャラクター吹き出し
   - テキストアニメーション（段階的表示）
   - 選択肢ボタン（「なるほど」「もう一度説明して」など）

4. **状態管理**（Vue Reactive）
   - ボード状態（盤面の黒白配置）
   - ゲーム進行状況（何手目か、どの珠型か）
   - 学習進度（レベル、クリア済みシナリオ）

### 学習アプリの一般的な構成要素

#### ゲーミフィケーション要素

| 要素                     | 教育ゲーム での使用例                            |
| ------------------------ | ------------------------------------------------ |
| **ポイント/スコア**      | 正しい手を指すと獲得、進度測定                   |
| **バッジ**               | 「三三を回避できた」「珠型マスター」など達成記念 |
| **レベル設定**           | 初級→中級→上級の段階的学習                       |
| **プログレスバー**       | 現在のレベルでの完成度を可視化                   |
| **パフォーマンスグラフ** | 自分の成長を時系列で表示                         |
| **リーダーボード**       | 友人との比較（ただしアプリ使用者のみ）           |

#### 一般的なチュートリアル構成

1. **導入チュートリアル**：基本ルール説明（3-5分）
2. **ストーリーモード**：シナリオベースの段階的レッスン
3. **パズルモード**：特定の局面で「次の正しい手」を学ぶ
4. **フリープレイ**：AIやほかのユーザーと対局

#### 学習データ追跡（Progress Tracking）

- ユーザーが学んだ珠型リスト
- 完了したシナリオ
- 習得した戦略パターン
- ローカルストレージ（またはクラウド）で保存

### 初中級者の定義と学習目標

#### レベル定義

| レベル       | 習得内容                  | 想定目標                         |
| ------------ | ------------------------- | -------------------------------- |
| **初級前期** | 基本ルール、禁じ手の理解  | 相手の活四を認識して防げる       |
| **初級後期** | 三・四の基本パターン認識  | 簡単な攻撃（活三を作る）ができる |
| **中級前期** | 珠型（4-5パターン）の理解 | 基本的な局面判断ができる         |
| **中級後期** | 四三パターン、防御戦略    | 簡単な定石を活用できる           |

#### 習得の関鍵要素

- **パターン認識能力**：「このボード配置は活三が作れる」と瞬時に判断
- **因果関係の理解**：「この手を打つと、次に相手がこう応じる」という予測
- **戦略的思考**：短期的な防御と長期的な攻撃のバランス

### キャラクターによる「双方向やり取り」の実装例

```
【ユーザー（みこ）が不正な手を指そうとした場合】
フブキ先生：「ちょっと待ってみこさん！その手は禁じ手になってしまいますね。
           黒が三三を作っていますね。ここは避けるべき場所ですよ」
みこ：「あ、そっか。」
      → ユーザーに判断を促す

【正しい防御ができた場合】
フブキ先生：「素晴らしい！みこさんが相手の活四を正確に止めました。
           このような対応が『守り』の基本ですね」
みこ：「やった！フブキ先生に褒められた～！」
      → 強化学習 + キャラの喜びの反応
```

#### 段階的学習フロー例

1. **シナリオ1-1**：「フブキ先生と一緒に活三を学ぼう」（フブキが解説→みこが該当箇所をタップ）
2. **シナリオ1-2**：「活四を見つけてみこちゃん！」（フブキとの指定局面での対局）
3. **シナリオ2-1**：「珠型『寒星』の秘密」（フブキが珠型の利点を丁寧に説明）
4. **チャレンジモード**：「フブキ先生とのコンテスト」「3手以内に勝つ」パズル形式

#### 技術的メリット

- **Vue**：リアクティブなUI（ボード状態の変化をリアルタイム反映）
- **Konva**：スムーズなドラッグ&ドロップ操作感
- **キャラクター層**：CSS/SVGで軽量に実装可能
  \*\*
