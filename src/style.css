:root {
  font-family:
    "Kiwi Maru", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3",
    "Yu Gothic Medium", "游ゴシック Medium", YuGothic, "游ゴシック体",
    sans-serif;
  line-height: 1.5;
  font-weight: 300;

  /* ブラウザの最小フォントサイズ設定を上書き */
  -webkit-text-size-adjust: none;
  -moz-text-size-adjust: none;
  text-size-adjust: none;

  /* フォント */
  --font-weight-normal: 300;
  --font-weight-bold: 500;

  /* キャラクターカラー - 白上フブキ */
  --color-fubuki-primary: #54c7ea;
  --color-fubuki-bg: #77dfff;
  --color-fubuki-bg-light: #77dfff4d;

  /* キャラクターカラー - さくらみこ */
  --color-miko-primary: #fe4b74;
  --color-miko-bg: #ff9cb4;
  --color-miko-bg-light: #ff9cb433;

  /* ブランドカラー */
  --color-holo-cyan: #5fdeec;
  --color-holo-blue: #37abdf;

  /* カラースケール - 白上フブキ (H: 194, S: 78%) */
  --color-fubuki-100: hsl(194, 78%, 95%);
  --color-fubuki-200: hsl(194, 78%, 90%);
  --color-fubuki-300: hsl(194, 78%, 80%);
  --color-fubuki-400: hsl(194, 78%, 70%);
  --color-fubuki-500: hsl(194, 78%, 62%);
  --color-fubuki-600: hsl(194, 78%, 45%);
  --color-fubuki-700: hsl(194, 78%, 35%);
  --color-fubuki-800: hsl(194, 78%, 25%);
  --color-fubuki-900: hsl(194, 78%, 18%);
  --color-fubuki-1000: hsl(194, 78%, 12%);

  /* カラースケール - さくらみこ (H: 346, S: 99%) */
  --color-miko-100: hsl(346, 99%, 95%);
  --color-miko-200: hsl(346, 99%, 90%);
  --color-miko-300: hsl(346, 99%, 80%);
  --color-miko-400: hsl(346, 99%, 70%);
  --color-miko-500: hsl(346, 99%, 65%);
  --color-miko-600: hsl(346, 99%, 45%);
  --color-miko-700: hsl(346, 99%, 35%);
  --color-miko-800: hsl(346, 99%, 25%);
  --color-miko-900: hsl(346, 99%, 18%);
  --color-miko-1000: hsl(346, 99%, 12%);

  /* カラースケール - ホロシアン (H: 186, S: 78%) */
  --color-cyan-100: hsl(186, 78%, 95%);
  --color-cyan-200: hsl(186, 78%, 90%);
  --color-cyan-300: hsl(186, 78%, 80%);
  --color-cyan-400: hsl(186, 78%, 70%);
  --color-cyan-500: hsl(186, 78%, 65%);
  --color-cyan-600: hsl(186, 78%, 45%);
  --color-cyan-700: hsl(186, 78%, 35%);
  --color-cyan-800: hsl(186, 78%, 25%);
  --color-cyan-900: hsl(186, 78%, 18%);
  --color-cyan-1000: hsl(186, 78%, 12%);

  /* カラースケール - ホロブルー (H: 199, S: 72%) */
  --color-blue-100: hsl(199, 72%, 95%);
  --color-blue-200: hsl(199, 72%, 90%);
  --color-blue-300: hsl(199, 72%, 80%);
  --color-blue-400: hsl(199, 72%, 70%);
  --color-blue-500: hsl(199, 72%, 55%);
  --color-blue-600: hsl(199, 72%, 45%);
  --color-blue-700: hsl(199, 72%, 35%);
  --color-blue-800: hsl(199, 72%, 25%);
  --color-blue-900: hsl(199, 72%, 18%);
  --color-blue-1000: hsl(199, 72%, 12%);

  /* ニュートラルカラー */
  --color-text-primary: #333333;
  --color-text-secondary: #666666;
  --color-text-light: #cccccc;
  --color-border: #dddddd;
  --color-border-heavy: #bbbbbb;
  --color-bg-white: #ffffff;
  --color-bg-gray: #f5f5f5;
  --color-bg-dark: #444444;

  /* 状態色 */
  --color-success: #48bb78;
  --color-success-light: #f0fff4;
  --color-success-dark: #276749;
  --color-error: #dc2626;
  --color-error-light: #fee2e2;
  --color-warning: #f59e0b;
  --color-warning-light: #fff3cd;

  /* 無効状態 */
  --color-disabled-bg: #cccccc;
  --color-disabled-text: #666666;
  --color-inactive: #cccccc;

  /* キャラクター名用（濃い色でコントラスト確保） */
  --color-fubuki-name: var(--color-fubuki-700);
  --color-miko-name: var(--color-miko-700);

  /* セマンティックトークン - UI共通 */
  --color-primary: var(--color-cyan-500);
  --color-primary-light: var(--color-cyan-100);
  --color-primary-hover: var(--color-cyan-200);
  --color-background-secondary: var(--color-bg-gray);
  --color-background-hover: var(--color-cyan-100);
  --color-border-light: var(--color-border);

  /* ブロック背景用カラー */
  --color-block-bg: rgba(95, 222, 236, 0.2);

  /* グラデーション */
  --gradient-main: linear-gradient(135deg, #5fdeec 0%, #46c0ef 100%);
  --gradient-accent: linear-gradient(90deg, #4caf50, #8bc34a);

  /* ボタン用グラデーション */
  --gradient-button-primary: linear-gradient(
    135deg,
    var(--color-cyan-300) 0%,
    var(--color-blue-400) 100%
  );
  --gradient-button-secondary: linear-gradient(
    135deg,
    var(--color-cyan-200) 0%,
    var(--color-blue-300) 100%
  );

  /* 難易度グラデーション（薄い→濃い） */
  --gradient-difficulty-1: linear-gradient(
    135deg,
    var(--color-cyan-100) 0%,
    var(--color-cyan-200) 100%
  );
  --gradient-difficulty-2: linear-gradient(
    135deg,
    var(--color-cyan-200) 0%,
    var(--color-cyan-300) 100%
  );
  --gradient-difficulty-3: linear-gradient(
    135deg,
    var(--color-blue-500) 0%,
    var(--color-blue-600) 100%
  );
  --gradient-difficulty-4: linear-gradient(
    135deg,
    var(--color-blue-500) 0%,
    var(--color-blue-600) 100%
  );
  --gradient-difficulty-5: linear-gradient(
    135deg,
    var(--color-blue-600) 0%,
    var(--color-blue-700) 100%
  );
  --gradient-difficulty-6: linear-gradient(
    135deg,
    var(--color-blue-700) 0%,
    var(--color-blue-800) 100%
  );

  /* テキストサイズ倍率（デフォルト=標準=1.15） */
  --text-size-multiplier: 1.15;

  /* 演出速度倍率（JSからセット） */
  --effect-speed-multiplier: 1;

  /* 演出duration（CSS用） */
  --duration-character: calc(0.3s * var(--effect-speed-multiplier));
  --duration-dialog: calc(0.15s * var(--effect-speed-multiplier));
  --duration-sprite: calc(0.3s * var(--effect-speed-multiplier));
  --duration-cutin-overlay: calc(0.2s * var(--effect-speed-multiplier));

  color-scheme: light;
  color: var(--color-text-primary);
  background-color: var(--color-bg-white);

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* 有効ビューポート幅: #appの実際の幅に連動（16:9制限を反映） */
  --effective-vw: min(100vw, calc(100svh * 16 / 9));

  /* 960px基準の相対値変数 (960px = 100vw, 540px = 100svh) - clamp()で最小値・最大値を設定 */
  --size-2: clamp(1.5px, calc(var(--effective-vw) * 0.00208), 3px); /* 2px */
  --size-4: clamp(3px, calc(var(--effective-vw) * 0.00417), 5px); /* 4px */
  --size-5: clamp(3px, calc(var(--effective-vw) * 0.00521), 7px); /* 5px */
  --size-6: clamp(4px, calc(var(--effective-vw) * 0.00625), 8px); /* 6px */
  --size-8: clamp(5px, calc(var(--effective-vw) * 0.00833), 11px); /* 8px */
  --size-10: clamp(7px, calc(var(--effective-vw) * 0.01042), 14px); /* 10px */
  --size-12: clamp(8px, calc(var(--effective-vw) * 0.0125), 16px); /* 12px */
  --size-14: clamp(10px, calc(var(--effective-vw) * 0.01458), 18px); /* 14px */
  --size-16: clamp(11px, calc(var(--effective-vw) * 0.01667), 21px); /* 16px */
  --size-18: clamp(13px, calc(var(--effective-vw) * 0.01875), 23px); /* 18px */
  --size-20: clamp(14px, calc(var(--effective-vw) * 0.02083), 26px); /* 20px */
  --size-24: clamp(16px, calc(var(--effective-vw) * 0.025), 32px); /* 24px */
  --size-28: clamp(19px, calc(var(--effective-vw) * 0.02917), 37px); /* 28px */
  --size-30: clamp(20px, calc(var(--effective-vw) * 0.03125), 40px); /* 30px */
  --size-32: clamp(22px, calc(var(--effective-vw) * 0.03333), 42px); /* 32px */
  --size-40: clamp(28px, calc(var(--effective-vw) * 0.04167), 53px); /* 40px */
  --size-48: clamp(33px, calc(var(--effective-vw) * 0.05), 64px); /* 48px */
  --size-56: clamp(39px, calc(var(--effective-vw) * 0.05833), 74px); /* 56px */
  --size-60: clamp(42px, calc(var(--effective-vw) * 0.0625), 80px); /* 60px */
  --size-64: clamp(44px, calc(var(--effective-vw) * 0.06667), 88px); /* 64px */
  --size-80: clamp(56px, calc(var(--effective-vw) * 0.08333), 106px); /* 80px */
  --size-100: clamp(
    70px,
    calc(var(--effective-vw) * 0.10417),
    133px
  ); /* 100px */
  --size-120: clamp(84px, calc(var(--effective-vw) * 0.125), 160px); /* 120px */
  --size-150: clamp(
    105px,
    calc(var(--effective-vw) * 0.15625),
    200px
  ); /* 150px */
  --size-180: clamp(
    126px,
    calc(var(--effective-vw) * 0.1875),
    240px
  ); /* 180px */
  --size-200: clamp(
    140px,
    calc(var(--effective-vw) * 0.20833),
    266px
  ); /* 200px */
  --size-250: clamp(
    175px,
    calc(var(--effective-vw) * 0.26042),
    333px
  ); /* 250px */
  --size-300: clamp(
    210px,
    calc(var(--effective-vw) * 0.3125),
    400px
  ); /* 300px */
  --size-350: clamp(
    245px,
    calc(var(--effective-vw) * 0.36458),
    466px
  ); /* 350px */
  --size-500: clamp(
    350px,
    calc(var(--effective-vw) * 0.52083),
    666px
  ); /* 500px */
  --size-600: clamp(
    420px,
    calc(var(--effective-vw) * 0.625),
    800px
  ); /* 600px */
  --size-1200: clamp(
    840px,
    calc(var(--effective-vw) * 1.25),
    1600px
  ); /* 1200px */

  /* テキストサイズ用変数（--text-size-multiplier適用） */
  --font-size-10: calc(var(--size-10) * var(--text-size-multiplier));
  --font-size-12: calc(var(--size-12) * var(--text-size-multiplier));
  --font-size-14: calc(var(--size-14) * var(--text-size-multiplier));
  --font-size-16: calc(var(--size-16) * var(--text-size-multiplier));
  --font-size-18: calc(var(--size-18) * var(--text-size-multiplier));
  --font-size-20: calc(var(--size-20) * var(--text-size-multiplier));
  --font-size-24: calc(var(--size-24) * var(--text-size-multiplier));
  --font-size-28: calc(var(--size-28) * var(--text-size-multiplier));
  --font-size-32: calc(var(--size-32) * var(--text-size-multiplier));
  --font-size-48: calc(var(--size-48) * var(--text-size-multiplier));
}

/* UA スタイルシートをリセット */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  padding: 0;
  font-size: inherit;
  font-weight: inherit;
}

p {
  margin: 0;
  padding: 0;
}

ul,
ol {
  margin: 0;
  padding: 0;
  list-style: none;
}

li {
  margin: 0;
  padding: 0;
}

button {
  margin: 0;
  padding: 0;
  border: none;
  background: none;
  font-family: inherit;
  font-size: inherit;
  color: inherit;
  cursor: pointer;
}

button:disabled {
  cursor: not-allowed;
}

input,
textarea,
select {
  margin: 0;
  padding: 0;
  font-family: inherit;
  font-size: inherit;
  color: inherit;
  background-color: inherit;
  border: none;
}

a {
  color: inherit;
  text-decoration: inherit;
}
a {
  font-weight: 500;
  color: var(--color-fubuki-primary);
  text-decoration: inherit;
}

a:hover {
  color: #2b7fe6;
}

ruby {
  ruby-align: center;
  ruby-position: over;
}

rt {
  font-size: var(--size-8);
  font-weight: 300;
}

strong {
  font-weight: 500;
  background: linear-gradient(
    to bottom,
    transparent 60%,
    rgba(255, 235, 59, 0.4) 60%
  );
  text-decoration: underline;
  text-decoration-color: rgba(255, 235, 59, 0.6);
  text-decoration-thickness: 3px;
  text-underline-offset: 2px;
}

body {
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 320px;
  width: 100vw;
  height: 100svh;
  overflow: hidden;
  background-color: var(--color-bg-white);
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

#app {
  width: 100vw;
  max-width: calc(100svh * 16 / 9);
  aspect-ratio: 16 / 9;
  max-height: 100svh;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

/* テキストサイズ設定（normalが基準=1.15） */
/* normal は :root のデフォルト値 1.15 を使用 */

:root[data-text-size="large"] {
  --text-size-multiplier: 1.3;
}

/* ===== エディタ用インラインエラー・カウンター ===== */

.inline-error {
  color: var(--color-error);
  font-size: var(--size-10);
  margin-top: var(--size-2);
}

.char-counter {
  font-size: var(--size-10);
  color: var(--color-text-secondary);
  text-align: right;
  margin-top: var(--size-2);
}

.char-counter--over {
  color: var(--color-error);
  font-weight: var(--font-weight-bold);
}

/* ===== アクセシビリティ：視覚的に非表示だがスクリーンリーダーには読み上げ ===== */

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
